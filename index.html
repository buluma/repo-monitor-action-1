<!DOCTYPE html>
<html>
  <head>
    <title>Metrics</title>
    <script
      src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"
      integrity="sha256-R4pqcOYV8lt7snxMQO/HSbVCFRPMdrhAFMH+vr9giYI="
      crossorigin="anonymous"
    ></script>
    <script>
      const fetchJSON = async (url) => {
        const res = await fetch(url);
        const parsed = await res.json();

        var ctx = document.getElementById("myChart");
        var myChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: ["Red"],
            datasets: [
              {
                label: "# of Votes",
                data: parsed.values.map((n) => n.value),
                backgroundColor: ["rgba(255, 99, 132, 0.2)"],
                borderColor: ["rgba(255, 99, 132, 1)"],
                borderWidth: 1,
              },
            ],
          },
          options: {
            scales: {
              yAxes: [
                {
                  ticks: {
                    beginAtZero: true,
                  },
                },
              ],
            },
          },
        });
      };

      fetchJSON(
        "https://floric.github.io/repo-monitor-action/data/bundle-size.json"
      );
    </script>
  </head>
  <body>
    <h1>Chart</h1>
    <canvas id="myChart" width="400" height="400"></canvas>
  </body>
</html>
